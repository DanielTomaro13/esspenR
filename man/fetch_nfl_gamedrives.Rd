% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_nfl_gamedrives.R
\name{fetch_nfl_gamedrives}
\alias{fetch_nfl_gamedrives}
\title{Fetch NFL game drives data using Core API}
\usage{
fetch_nfl_gamedrives(event_id, return_type = "all", raw = FALSE)
}
\arguments{
\item{event_id}{Character or Numeric. ESPN event ID (required).
The unique identifier for the game in ESPN's database.}

\item{return_type}{Character. Type of data to return (default: "all").
Options are:
\itemize{
\item "summary" - Basic summary information
\item "drives" - Individual drive data
\item "all" - All data types combined
}}

\item{raw}{Logical. If TRUE, assigns raw JSON response to global environment
as 'nfl_drives_raw' for debugging purposes (default: FALSE).}
}
\value{
Invisibly returns the processed data. The main purpose is global
environment assignment based on return_type:
\itemize{
\item \code{nfl_drives_summary} - Summary data frame
\item \code{nfl_drives_drives} - Drives data frame
\item \code{nfl_drives_raw} - Raw JSON response (if raw = TRUE)
}
}
\description{
Retrieves detailed drive information from ESPN's Core API.
The function fetches comprehensive drive data including start/end
field position, time elapsed, and drive results for a specific NFL game.
}
\details{
The function creates structured data frames with comprehensive drive information:

\strong{Summary} (\code{nfl_drives_summary}):
\itemize{
\item Request metadata: total_drives, total_pages, page_index, page_size
\item Event identification and pagination information
}

\strong{Drives} (\code{nfl_drives_drives}):
\itemize{
\item Drive identification: drive_id, drive_number, team_ref
\item Start situation: period, clock, yard_line, yards_to_endzone
\item End situation: period, clock, yard_line, yards_to_endzone
\item Drive statistics: plays_count, yards_gained, time_elapsed
\item Drive outcome: is_scoring_drive, result, display_result
}

This provides detailed drive-level analysis capabilities including
field position trends, time management, and drive efficiency metrics.
Essential for understanding team offensive and defensive performance
in different game situations.
}
\examples{
\dontrun{
# Get complete drives data for a specific game
fetch_nfl_gamedrives(event_id = "401671617")

# Check what data was created
head(nfl_drives_summary)
head(nfl_drives_drives)

# Get only drives data
fetch_nfl_gamedrives(event_id = "401671617", return_type = "drives")

# Analyze scoring drives
scoring_drives <- nfl_drives_drives[
  nfl_drives_drives$is_scoring_drive == "true",
  c("drive_number", "plays_count", "yards_gained", "time_elapsed_display", "result")
]
print(scoring_drives)

# Red zone efficiency (drives starting within 20 yards)
red_zone_drives <- nfl_drives_drives[
  !is.na(nfl_drives_drives$start_yards_to_endzone) &
  as.numeric(nfl_drives_drives$start_yards_to_endzone) <= 20,
  c("drive_number", "start_yards_to_endzone", "result", "is_scoring_drive")
]

# Drive efficiency by result
drive_results <- table(nfl_drives_drives$result)
print(drive_results)

# Average drive statistics
drives_numeric <- nfl_drives_drives[!is.na(nfl_drives_drives$plays_count), ]
if(nrow(drives_numeric) > 0) {
  avg_plays <- mean(as.numeric(drives_numeric$plays_count), na.rm = TRUE)
  avg_yards <- mean(as.numeric(drives_numeric$yards_gained), na.rm = TRUE)
  cat("Average plays per drive:", round(avg_plays, 1), "\n")
  cat("Average yards per drive:", round(avg_yards, 1), "\n")
}

# Get raw data for debugging
fetch_nfl_gamedrives(event_id = "401671617", raw = TRUE)
str(nfl_drives_raw, max.level = 2)
}

}
\seealso{
\code{\link{fetch_multiple_nfl_gamedrives}} for fetching
multiple games' data
}
