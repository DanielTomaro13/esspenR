% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_college_football_rankings.R
\name{fetch_college_football_rankings}
\alias{fetch_college_football_rankings}
\title{Fetch college football rankings using Site API}
\usage{
fetch_college_football_rankings(
  year = as.integer(format(Sys.Date(), "\%Y")),
  week = NULL,
  season_type = 2,
  poll = "all",
  raw = FALSE
)
}
\arguments{
\item{year}{Integer. Season year to fetch rankings for (default: current year).}

\item{week}{Integer. Week number to fetch rankings for (default: NULL for latest).}

\item{season_type}{Integer. Season type: 2=Regular, 3=Postseason (default: 2).}

\item{poll}{Character. Specific poll to fetch. Options: "all", "ap", "coaches", "cfp" (default: "all").}

\item{raw}{Logical. If TRUE, assigns raw JSON response to global environment
as 'cfb_rankings_raw' for debugging purposes (default: FALSE).}
}
\value{
Invisibly returns the processed data frame. The main purpose is global
environment assignment of \code{cfb_rankings} containing:
\itemize{
\item Poll information: name, type, published date
\item Season details: year, type, week number
\item Ranking data: position, previous rank, points, first-place votes, trend
\item Team details: names, abbreviations, colors, logos, records
\item Conference information: conference ID, name, short name
}
}
\description{
Retrieves college football rankings from ESPN's Site API.
The function fetches comprehensive ranking information including
AP Top 25, Coaches Poll, and College Football Playoff rankings.
}
\details{
The function creates a structured data frame with comprehensive college football ranking information.
Each row represents a team's ranking in a specific poll with detailed information about
the team, their ranking position, and poll-specific data.

\strong{Poll Information}:
\itemize{
\item Poll details: name, short name, type, published date
\item Timing: season year, week number, season type
}

\strong{Ranking Data}:
\itemize{
\item Position: current rank, previous rank
\item Voting: points received, first-place votes
\item Movement: trend (up, down, new, etc.)
}

\strong{Team Information}:
\itemize{
\item Identity: team names, abbreviations, locations
\item Branding: team colors, logos
\item Performance: win-loss records
\item Conference: conference affiliation and details
}

\strong{Available Polls}:
\itemize{
\item AP Top 25: Associated Press Poll
\item Coaches Poll: USA Today Coaches Poll
\item CFP Rankings: College Football Playoff Rankings
\item Historical: BCS Rankings (when available)
}
}
\examples{
\dontrun{
# Get all current rankings
fetch_college_football_rankings()

# Get rankings for specific week
fetch_college_football_rankings(week = 10)

# Get rankings for specific year
fetch_college_football_rankings(year = 2023, week = 15)

# Get only AP Poll rankings
fetch_college_football_rankings(poll = "ap")

# Get CFP Rankings
fetch_college_football_rankings(poll = "cfp")

# Check the data
head(cfb_rankings)

# View AP Top 10
ap_top10 <- cfb_rankings[
  cfb_rankings$poll_short_name == "AP" &
  as.numeric(cfb_rankings$rank_position) <= 10,
  c("rank_position", "team_display_name", "team_record_summary", "points")
]
print("AP Top 10:")
print(ap_top10)

# Compare polls for same teams
if(require(dplyr, quietly = TRUE)) {
  poll_comparison <- cfb_rankings \%>\%
    filter(rank_position <= 25) \%>\%
    select(poll_short_name, rank_position, team_display_name) \%>\%
    pivot_wider(names_from = poll_short_name, values_from = rank_position) \%>\%
    arrange(as.numeric(AP))

  print("Poll comparison:")
  print(head(poll_comparison, 15))
}

# First-place votes analysis
first_place <- cfb_rankings[
  !is.na(cfb_rankings$first_place_votes) &
  cfb_rankings$first_place_votes != "" &
  cfb_rankings$first_place_votes != "0",
  c("poll_short_name", "rank_position", "team_display_name", "first_place_votes")
]
if(nrow(first_place) > 0) {
  print("Teams receiving first-place votes:")
  print(first_place)
}

# Movement analysis
movement <- cfb_rankings[
  !is.na(cfb_rankings$trend) & cfb_rankings$trend != "",
  c("poll_short_name", "rank_position", "previous_rank", "team_display_name", "trend")
]
if(nrow(movement) > 0) {
  print("Ranking movement:")
  print(head(movement, 20))
}

# Conference representation in rankings
conf_representation <- table(cfb_rankings$team_conference_name[cfb_rankings$team_conference_name != ""])
print("Conference representation in rankings:")
print(sort(conf_representation, decreasing = TRUE))
}

}
\seealso{
\code{\link{get_cfb_ranking_polls}} for poll information
}
