% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/fetch_nfl_game_playbyplay.R
\name{fetch_nfl_game_playbyplay}
\alias{fetch_nfl_game_playbyplay}
\title{Fetch NFL game play-by-play data using CDN API}
\usage{
fetch_nfl_game_playbyplay(event_id, return_type = "all", raw = FALSE)
}
\arguments{
\item{event_id}{Character or Numeric. ESPN event ID (required).
The unique identifier for the game in ESPN's database.}

\item{return_type}{Character. Type of data to return (default: "all").
Options are:
\itemize{
\item "game_summary" - Basic game information and totals
\item "drives" - Drive-level information
\item "plays" - Individual play-by-play data
\item "all" - All data types combined
}}

\item{raw}{Logical. If TRUE, assigns raw JSON response to global environment
as 'nfl_pbp_raw' for debugging purposes (default: FALSE).}
}
\value{
Invisibly returns the processed data. The main purpose is global
environment assignment based on return_type:
\itemize{
\item \code{nfl_pbp_game_summary} - Game summary data frame
\item \code{nfl_pbp_drives} - Drives data frame
\item \code{nfl_pbp_plays} - Plays data frame
\item \code{nfl_pbp_raw} - Raw JSON response (if raw = TRUE)
}
}
\description{
Retrieves detailed play-by-play information from ESPN's CDN API.
The function fetches comprehensive drive and play data
for a specific NFL game.
}
\details{
The function creates structured data frames with comprehensive play-by-play information:

\strong{Game Summary} (\code{nfl_pbp_game_summary}):
\itemize{
\item Game details: event_id, game_date, game_status, season info
\item Team matchup: home_team vs away_team with final scores
\item Totals: total_plays, total_drives
}

\strong{Drives} (\code{nfl_pbp_drives}):
\itemize{
\item Drive-level information: start/end field position and time
\item Drive statistics: plays count, yards gained, time elapsed
\item Drive results: touchdown, field goal, punt, turnover, etc.
}

\strong{Plays} (\code{nfl_pbp_plays}):
\itemize{
\item Individual play details: down, distance, yard line, clock
\item Play description and type classification
\item Scoring plays and running score after each play
\item Field position and game situation context
}

This provides the most detailed game flow information available,
including every play call, field position changes, and scoring events.
Perfect for advanced analytics, win probability models, and detailed
game analysis.
}
\examples{
\dontrun{
# Get complete play-by-play for a specific game
fetch_nfl_game_playbyplay(event_id = "401671617")

# Check what data was created
head(nfl_pbp_game_summary)
head(nfl_pbp_drives)
head(nfl_pbp_plays)

# Get only plays data
fetch_nfl_game_playbyplay(event_id = "401671617", return_type = "plays")

# Analyze scoring plays
scoring_plays <- nfl_pbp_plays[
  as.numeric(nfl_pbp_plays$score_value) > 0,
  c("period", "clock", "team_abbreviation", "play_text", "score_value")
]
print(scoring_plays)

# View red zone drives
red_zone_drives <- nfl_pbp_drives[
  as.numeric(nfl_pbp_drives$start_yards_to_goal) <= 20 &
  !is.na(nfl_pbp_drives$start_yards_to_goal),
  c("team_abbreviation", "start_yards_to_goal", "result", "yards")
]
print(red_zone_drives)

# Third down conversion analysis
third_downs <- nfl_pbp_plays[
  nfl_pbp_plays$down == "3",
  c("team_abbreviation", "distance", "play_type", "play_text")
]
head(third_downs)

# Get raw data for debugging
fetch_nfl_game_playbyplay(event_id = "401671617", raw = TRUE)
str(nfl_pbp_raw, max.level = 2)
}

}
\seealso{
\code{\link{fetch_multiple_nfl_game_playbyplay}} for fetching
multiple games' data
}
